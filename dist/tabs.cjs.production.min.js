"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;require("prop-types"),require("warning");var r=require("@reach/descendants"),a=require("@reach/utils"),i=require("@reach/auto-id");function d(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}var o=r.createDescendantContext("TabsDescendantsContext"),c=r.createDescendantContext("TabPanelDescendantsContext"),s=a.createNamedContext("TabsContext",{}),l=function(){return t.useContext(s)},u=a.forwardRefWithAs((function(e,c){var l,u=e.as,b=void 0===u?"div":u,h=e.children,x=e.defaultIndex,m=e.orientation,p=void 0===m?"horizontal":m,I=e.index,w=void 0===I?void 0:I,R=e.onChange,D=e.readOnly,E=void 0!==D&&D,y=d(e,["as","children","defaultIndex","orientation","index","onChange","readOnly"]),C=t.useRef(null!=w);t.useEffect((function(){}),[w]);var g=i.useId(y.id),k=null!==(l=y.id)&&void 0!==l?l:a.makeId("tabs",g),P=n.Children.toArray(h),A=P.findIndex((function(e){return n.isValidElement(e)&&e.type===v})),O=P.findIndex((function(e){return n.isValidElement(e)&&e.type===f})),S=O>-1&&A>-1&&O<A,T=t.useRef(!1),j=t.useRef(null),q=t.useState(x||0),F=q[0],W=q[1],K=r.useDescendants(),L=K[0],B=K[1],V=t.useMemo((function(){return{isControlled:C.current,selectedIndex:C.current?w:F,orientation:p,listBeforePanels:S,id:k,userInteractedRef:T,selectedPanelRef:j,setSelectedIndex:C.current?a.noop:W,onFocusPanel:function(){var e;null===(e=j.current)||void 0===e||e.focus()},onSelectTab:E?a.noop:function(e){T.current=!0,R&&R(e),C.current||W(e)}}}),[w,p,S,k,R,E,F]);return t.useEffect((function(){return a.checkStyles("tabs")}),[]),n.createElement(r.DescendantProvider,{context:o,items:L,set:B},n.createElement(s.Provider,{value:V},n.createElement(b,Object.assign({},y,{ref:c,"data-reach-tabs":"",id:y.id,"data-reach-tabs-orientation":p}),h)))})),f=a.forwardRefWithAs((function(e,i){var c=e.children,s=e.as,u=void 0===s?"div":s,f=e.onKeyDown,b=d(e,["children","as","onKeyDown"]),v=l(),h=v.isControlled,x=v.onSelectTab,m=v.onFocusPanel,p=v.setSelectedIndex,I=v.selectedIndex,w=v.orientation,R=v.listBeforePanels,D=t.useContext(o).descendants,E=t.useRef(null),y=a.useForkedRef(i,E),C=t.useRef(!1);t.useEffect((function(){E.current&&(E.current.ownerDocument&&"rtl"===E.current.ownerDocument.dir||"rtl"===a.getElementComputedStyle(E.current,"direction"))&&(C.current=!0)}),[]);var g=a.wrapEvent((function(e){e.key===("vertical"===w?C.current?R?"ArrowLeft":"ArrowRight":R?"ArrowRight":"ArrowLeft":R?"ArrowDown":"ArrowUp")&&(e.preventDefault(),m())}),r.useDescendantKeyDown(o,{currentIndex:I,orientation:w,rotate:!0,callback:x,filter:function(e){return!e.disabled},rtl:C.current}));return a.useIsomorphicLayoutEffect((function(){var e;if(!h&&a.boolOrBoolString(null===(e=D[I])||void 0===e?void 0:e.disabled)){var t=D.find((function(e){return!e.disabled}));t&&p(t.index)}}),[D,h,I,p]),n.createElement(u,Object.assign({role:"tablist"},b,{"data-reach-tab-list":"","aria-orientation":w,ref:y,onKeyDown:a.wrapEvent(f,g)}),t.Children.map(c,(function(e,t){return a.cloneValidElement(e,{isSelected:t===I})})))})),b=a.forwardRefWithAs((function(e,i){var c=e.children,s=e.as,u=void 0===s?"button":s,f=e.disabled,b=d(e,["children","isSelected","as","disabled"]),v=l(),h=v.id,x=v.onSelectTab,m=v.selectedIndex,p=v.userInteractedRef,I=t.useRef(null),w=a.useForkedRef(i,I),R=r.useDescendant({element:I.current,context:o,disabled:!!f}),D=R===m;return a.useUpdateEffect((function(){D&&I.current&&p.current&&(p.current=!1,I.current.focus())}),[D]),n.createElement(u,Object.assign({"aria-controls":a.makeId(h,"panel",R),"aria-disabled":f,"aria-selected":D,role:"tab",tabIndex:D?0:-1},b,{ref:w,"data-reach-tab":"","data-selected":D?"":void 0,disabled:f,id:a.makeId(h,"tab",R),onClick:function(){x(R)}}),c)})),v=a.forwardRefWithAs((function(e,t){var a=e.children,i=e.as,o=void 0===i?"div":i,s=d(e,["children","as"]),l=r.useDescendants();return n.createElement(r.DescendantProvider,{context:c,items:l[0],set:l[1]},n.createElement(o,Object.assign({},s,{ref:t,"data-reach-tab-panels":""}),a))})),h=a.forwardRefWithAs((function(e,i){var o=e.children,s=e.as,u=void 0===s?"div":s,f=d(e,["children","aria-label","as"]),b=l(),v=b.selectedPanelRef,h=b.selectedIndex,x=b.id,m=t.useRef(null),p=r.useDescendant({element:m.current,context:c}),I=p===h,w=a.makeId(x,"panel",p),R=a.useForkedRef(i,m,I?v:null);return n.createElement(u,Object.assign({"aria-labelledby":a.makeId(x,"tab",p),hidden:!I,role:"tabpanel",tabIndex:I?0:-1},f,{ref:R,"data-reach-tab-panel":"",id:w}),o)}));exports.Tab=b,exports.TabList=f,exports.TabPanel=h,exports.TabPanels=v,exports.Tabs=u;
//# sourceMappingURL=tabs.cjs.production.min.js.map
